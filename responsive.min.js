
/* A polyfill to add CSS media queries, matchMedia and media query listeners to unsupported browsers
/* Based on respond.js (https://github.com/scottjehl/Respond/)  and matchMedia.js (https://github.com/paulirish/matchMedia/)
/* Copyright James Westgate 2012 */
/* Dual licensed under the MIT and GPL licenses */

(function(){function x(a,b,c,m){function e(a){return a.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+b+"$2$3")}var j=a.match(/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi),h=j&&j.length||0,b=b.substring(0,b.lastIndexOf("/")),i=!h&&c,k,f,d;b.length&&(b+="/");if(m||i)h=1;for(var g=0;g<h;g++){m?(k=m.media,n.push(m)):i?(k=c,n.push(e(a))):(k=j[g].match(/@media *([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1,n.push(RegExp.$2&&e(RegExp.$2)));k=k.split(",");d=k.length;for(var l=0;l<d;l++)f=k[l],f={media:f.split("(")[0].match(/(only\s+)?([a-zA-Z]+)\s?/)&&
RegExp.$2||"all",rules:n.length-1,hasquery:-1<f.indexOf("("),minw:f.match(/\(min\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:f.match(/\(max\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||"")},f.minw&&(f.minw=parseFloat(f.minw)),f.maxw&&(f.maxw=parseFloat(f.maxw)),t.push(f)}q()}function q(a){var b=(new Date).getTime();if(a&&u&&b-u<y)clearTimeout(z),z=setTimeout(q,y);else{u=b;for(var a=l.clientWidth,c="CSS1Compat"===h.compatMode&&
a||h.body.clientWidth||a,b={},m=r[r.length-1],a=0,e=t.length;a<e;a++){var j=t[a],g=j.minw,i=j.maxw,k=null===g,f=null===i,d=n[j.rules];d._listeners&&(d.matches=!1);if(!j.hasquery||(!k||!f)&&(k||c>=g)&&(f||c<=i))b[j.media]||(b[j.media]=[]),d._listeners?d.matches=!0:b[j.media].push(d)}a=0;for(e=p.length;a<e;a++)p[a]&&p[a].parentNode===s&&s.removeChild(p[a]);for(a in b)e=h.createElement("style"),d=b[a].join("\n"),e.type="text/css",e.media=a,s.insertBefore(e,m.nextSibling),e.styleSheet?e.styleSheet.cssText=
d:e.appendChild(h.createTextNode(d)),p.push(e);a=0;for(e=n.length;a<e;a++)if(d=n[a],d._listeners&&d.matches!=d._matches){d._matches=d.matches;b=0;for(m=d._listeners.length;b<m;b++)if(d._listeners[b])d._listeners[b](d)}}}function A(){q(!0)}if(!window.matchMedia||!window.matchMedia("only all").matches){var h=window.document,l=h.documentElement,t=[],n=[],p=[],y=30,s=h.getElementsByTagName("head")[0]||l,B=h.getElementsByTagName("base")[0],r=s.getElementsByTagName("link"),c;c=l.firstElementChild||l.firstChild;
var o=h.createElement("body"),i=h.createElement("div");window.matchMedia=function(a){var b,c=[];b={matches:!1,media:a,addListener:function(a){"function"===typeof a&&c.push(a)},removeListener:function(a){for(var b=0,g=c.length;b<g;b++)c[b]===a&&delete c[b]}};b._listeners=c;b._matches=!1;x(a,"","",b);return b};var u,z;i.id="mq-test-1";i.style.cssText="position:absolute;top:-100em";o.appendChild(i);i.innerHTML="&shy;<style>@media only all {#mq-test-1 { width: 42px; }}</style>";l.insertBefore(o,c);c=
42==i.offsetWidth;l.removeChild(o);if(c)q();else for(var o={},g,v=0,C=r.length;v<C;v++)if(g=r[v],c=g.href,i=g.media,c&&(g.rel&&"stylesheet"===g.rel.toLowerCase()&&!o[c])&&(o[c]=!0,!B&&!/^([a-zA-Z:]*\/\/)/.test(c)||c.replace(RegExp.$1,"").split("/")[0]===window.location.host)){g=c;var w=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");w.open("GET",g,!1);w.send();x(w.responseText,c,i)}window.addEventListener?window.addEventListener("resize",A,!1):window.attachEvent&&window.attachEvent("onresize",
A)}})();
